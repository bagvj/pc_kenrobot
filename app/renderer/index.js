"use strict";!function(e,r){var t=require("path"),n=process.defaultApp||/[\\/]electron-prebuilt[\\/]/.test(process.execPath)||/[\\/]electron[\\/]/.test(process.execPath);module.paths.push(n?t.resolve("app","node_modules"):t.resolve(__dirname,"..","..","app.asar","node_modules"));var o=require("electron").ipcRenderer,i=require("q"),a=[],s={},c=0;function l(e,r,t){var n=s[r];if(n){var o;"notify"==t?o=n.notify:(delete s[r],o=t?n.resolve:n.reject);for(var i=arguments.length,a=Array(i>3?i-3:0),c=3;c<i;c++)a[c-3]=arguments[c];o.apply(this,a)}}var u={},p={};function f(e,r){return e+"_"+r}function h(e,r){var t=f(e,r),n=u[t];if(!n)return this;n=n.concat().sort(function(e,r){return r.options.priority-e.options.priority});for(var o=arguments.length,i=Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];for(var s=0;s<n.length;s++){n[s].callback.apply(this,i)}return this}var v={};r.postMessage=function(e){a.indexOf(e)<0&&(o.on(e,l),a.push(e));var r=i.defer();s[++c]=r;for(var t=arguments.length,n=Array(t>1?t-1:0),u=1;u<t;u++)n[u-1]=arguments[u];return o.send.apply(this,[e,c].concat(n)),r.promise},r.listenMessage=function(e,r){var t=this;return o.on(e,function(e,n){r.apply(t,n)}),this},r.on=function(e,r,t,n){(n=n||{}).priority=n.priority||0,n.canReset=!1!==n.canReset;var o=f(e,r),i=u[o];return i||(i=[],u[o]=i),i.push({callback:t,options:n}),this},r.off=function(e,r,t){var n=f(e,r),o=u[n];if(!o)return this;for(var i=0;i<o.length;i++)if(o[i].callback==t){o.splice(i,1);break}return this},r.trigger=h,r.delayTrigger=function(e,r,t){for(var n=arguments.length,o=Array(n>3?n-3:0),i=3;i<n;i++)o[i-3]=arguments[i];var a=this,s=f(r,t),c=p[s];return c&&clearTimeout(c),c=setTimeout(function(){delete p[s],h.apply(a,[r,t].concat(o))},e),p[s]=c,this},r.reset=function(){for(var e in u){for(var r=u[e],t=r.length-1;t>=0;t--)r[t].options.canReset&&r.splice(t,1);0==r.length&&delete u[e]}for(var e in p){var n=p[e];n&&clearTimeout(n),delete p[e]}return p={},Object.keys(v).forEach(function(e){delete v[e]}),this},r.view=v,r.isPC=!0}(window,window.kenrobot||(window.kenrobot={}));